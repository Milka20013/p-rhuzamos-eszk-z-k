#include <assert.h>
#include <stdio.h>
#include<time.h>

#include "BigInt.h"

// Demo of some basic BigInt functionality

int main() {
    // Obtain a BigInt initialized to 42
    BigInt* new_big_int = BigInt_construct(42); assert(new_big_int);
    
    // Get a normal int back (the BigInt must fit in an int type)
    int as_int;
    assert(BigInt_to_int(new_big_int, &as_int));
    // Print to stdout with BigInt_print 
    printf("BigInt is: ");
    BigInt_print(new_big_int);
    printf("\nAs int: %i\n", as_int);

    // The caller is responsible for freeing a BigInt allocated with
    // BigInt_construct with a call to BigInt_free:
    BigInt_free(new_big_int);

    // BigInt operations take two BigInt parameters and place the result in the first parameter:
    BigInt* a = BigInt_construct(15); assert(a);
    BigInt* b = BigInt_construct(-20); assert(b);
    assert(BigInt_add(a, b));
    printf("Addition result: ");
    BigInt_print(a); // Prints -5
    printf("\n");

    FILE *test = fopen("test.dat", "w");
    
    BigInt_fprint(test, a);
    fprintf(test, "\n");

    fclose(test);

    // The exception is BigInt_compare; this takes two BigInt parameters, changes neither, and returns the value of the comparison:
    assert(BigInt_assign_int(a, 15));
    assert(BigInt_assign_int(b, -20));
    printf("Comparison results:\n");
    printf("%i\n", BigInt_compare(a, b)); // prints 1
    printf("%i\n", BigInt_compare(b, a)); // prints -1
    printf("%i\n", BigInt_compare(a, a)); // prints 0

    BigInt_free(a);
    BigInt_free(b);


    BigInt* biginttest = BigInt_from_string("123456789123456789123456789123456789");
    BigInt* biginttmp = BigInt_from_string("72627298186545297537169162214101085036570507091641835255961721757730149747984637174511876823701858691276867600096331545561895919995953822217751758658138802473872088668825429177381680659464187165671183005051122599334690003645627772154923663063248958663734537737190762864263328961739984452079300810398315851851522797105960116416471811680666302068366374260722211233694071458078222499123362031283164680741212595155037538065740569910831860728731400523578022348226451230734250244660513411729623491421339541416053752537024254550992792714075392766725060930807763470751178264740142163043814400259926565275818032982806492557970031120328011348580179334997561573020035543419148052029393931660637220665626485866850170652455760930112400853854412978947031070160690346296803682156152321870061909151124765069139849325763382882689761343087501347078314709489051545053062083657068352129567971943113464045180296194332171898768119431343821097946868062158034358699001025153726219387231655729089139615453659192633444173831753248109522349332680290519474724571956685284385801296700093156638254499003461574485840651285379792497032078560978381830304140511343875270417662163877715887052544798679486772024784561701211284817680140757549206069675655356660188499423024868255542146166163376827092763235612495753426893337597945058828651508364492467315147675803073507097277282799670459928683050263308481658521559890214243555653157117706000361628601379024186930439563865707636986754008989015950847988372352933131911901227648417123596157404294100753712283956408963652293148655697526531478464439820410977233802923336698352944117641043344609125754272325397129996165325987662253094005386980275823501506233837992650462072036226233489442669415874868522015187669560983125719603916700187875064959782862271367388905439920047836765977691820150227432803821675667375187629928701804906756803882952314586804346546670051366394274650913844104930270559276269651486929555446030710321309841955486647662451244164843249092022316963925365720697272458704209772586210355547683446236392107703851340698513611256579697381511298636113218264807987479057725282924623914327511378392374694454905689728658456927080017378989828597197090678136260333782188566290160589434675480476152140989931537162915872611508179303441647201740368230495665980254675302797058673946955449885261686521380398592046119840671798898812704541148138008432345521678229898962137131620690445976578561510682325039924906068245888202085607184187283448315381948056189845799129906988829243469530958511434915915594168642823391169313404569392766148122162422066547424663798321027890285360277791451154265876652767429153236391402148935712413325494851733960845459034137110123248905269939834344357713371199831414731756158303026472506393768619258326835073672904275571948769024695603661939506012468550979280297105918324178896723212296436645657428256120400422073914117606774600939571127200713581163129679465372478633015827019009019777157119789818996820090216141596187209592968495440905279801105820406597210422987485636133857089008177986870585978382035820143158960974767002474786078176928088642166924274249741592740695778233430620244342817070315055545685806232243098317712702831513927815891854223435506735867599647980");
    BigInt* biginttest2 = BigInt_from_string("72627298186545297537169162214101085036570507091641835255961721757730149747984637174511876823701858691276867600096331545561895919995953822217751758658138802473872088668825429177381680659464187165671183005051122599334690003645627772154923663063248958663734537737190762864263328961739984452079300810398315851851522797105960116416471811680666302068366374260722211233694071458078222499123362031283164680741212595155037538065740569910831860728731400523578022348226451230734250244660513411729623491421339541416053752537024254550992792714075392766725060930807763470751178264740142163043814400259926565275818032982806492557970031120328011348580179334997561573020035543419148052029393931660637220665626485866850170652455760930112400853854412978947031070160690346296803682156152321870061909151124765069139849325763382882689761343087501347078314709489051545053062083657068352129567971943113464045180296194332171898768119431343821097946868062158034358699001025153726219387231655729089139615453659192633444173831753248109522349332680290519474724571956685284385801296700093156638254499003461574485840651285379792497032078560978381830304140511343875270417662163877715887052544798679486772024784561701211284817680140757549206069675655356660188499423024868255542146166163376827092763235612495753426893337597945058828651508364492467315147675803073507097277282799670459928683050263308481658521559890214243555653157117706000361628601379024186930439563865707636986754008989015950847988372352933131911901227648417123596157404294100753712283956408963652293148655697526531478464439820410977233802923336698352944117641043344609125754272325397129996165325987662253094005386980275823501506233837992650462072036226233489442669415874868522015187669560983125719603916700187875064959782862271367388905439920047836765977691820150227432803821675667375187629928701804906756803882952314586804346546670051366394274650913844104930270559276269651486929555446030710321309841955486647662451244164843249092022316963925365720697272458704209772586210355547683446236392107703851340698513611256579697381511298636113218264807987479057725282924623914327511378392374694454905689728658456927080017378989828597197090678136260333782188566290160589434675480476152140989931537162915872611508179303441647201740368230495665980254675302797058673946955449885261686521380398592046119840671798898812704541148138008432345521678229898962137131620690445976578561510682325039924906068245888202085607184187283448315381948056189845799129906988829243469530958511434915915594168642823391169313404569392766148122162422066547424663798321027890285360277791451154265876652767429153236391402148935712413325494851733960845459034137110123248905269939834344357713371199831414731756158303026472506393768619258326835073672904275571948769024695603661939506012468550979280297105918324178896723212296436645657428256120400422073914117606774600939571127200713581163129679465372478633015827019009019777157119789818996820090216141596187209592968495440905279801105820406597210422987485636133857089008177986870585978382035820143158960974767002474786078176928088642166924274249741592740695778233430620244342817070315055545685806232243098317712702831513927815891854223435506735867599647980");
    clock_t start = clock();
    for (int i = 0; i < 1; i++)
    {
        BigInt_multiply(biginttmp,biginttest2);
        //BigInt_assign(biginttmp,biginttest);
    }
    clock_t end = clock();
    //BigInt_print(biginttmp);
    double time_spent = (double)(end - start) / CLOCKS_PER_SEC;
    printf("\nProgram Execution time is: %0.3lf seconds or %0.3lf milliseconds\n", time_spent, time_spent * 1000);
    
    BigInt_free(biginttest);
    BigInt_free(biginttest2);
    return 0;
}



